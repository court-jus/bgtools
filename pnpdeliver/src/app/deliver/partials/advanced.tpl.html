<div class="flex">
  <div class="noprint">
    <form class="form">
      <div>
        <h2>
          <a ng-click="othermodel.showDescription = !othermodel.showDescription"
             title="{{ 'Clic to show/hide game description.' | translate }}">
            <i class="fa fa-info-circle" />
            {{ model.metaData.gamename }}
            <small>{{ model.metaData.author }}</small>
          </a>
        </h2>
      </div>
      <uib-accordion close-others="false">
        <uib-accordion-group heading="{{ 'Game' | translate }}">
          <uib-accordion close-others="false">
            <button class="btn btn-default"
                    title="{{ 'Load a JSON file generated by this app.' | translate }}"
                    ng-click="loadJson()"
                    translate>
              Load
            </button>
            <button class="btn btn-default"
                    title="{{ 'Save to a JSON file that can be shared.' | translate }}"
                    ng-click="saveJson()"
                    translate>
              Save
            </button>
            <label>
              <translate>Name</translate>
              <input type="text"
                     class="form-control"
                     ng-model="model.metaData.gamename"
                     placeholder="Name" />
            </label>
            <label>
              <translate>Author</translate>
              <input type="text"
                     class="form-control"
                     ng-model="model.metaData.author"
                     placeholder="Author" />
            </label>
            <label>
              <translate>Game description</translate>
              <textarea class="form-control" ng-model="model.metaData.description"></textarea>
              <small translate>You can add a game description, with links to the rules or other components, to your website...</small>
            </label>

          </uib-accordion>
        </uib-accordion-group>

        <uib-accordion-group heading="Decks">
          <uib-accordion close-others="false">
            <label>
              <translate>Page break between decks</translate>
              <input type="checkbox" ng-model="model.deckBreak" />
            </label>
            <label>
              <translate>Create a new deck using image URLs</translate>
              <textarea class="form-control" ng-model="imagesUrls"></textarea>
              <small translate>Paste a list of image URLs. Each URL will be a distinct card.</small>
            </label>
            <button class="btn btn-default"
                    title="{{ 'Create a deck from this URL list.' | translate }}"
                    ng-click="addUrls()">
              <translate>Create a deck</translate>
            </button>
            <button class="btn btn-warning"
                    title="{{ 'Clear the URL list field.' | translate }}"
                    ng-click="imagesUrls = ''">
              <translate>Clear</translate>
            </button>
            <uib-accordion-group heading="{{ deck.name || 'unnamed deck' }}"
                 ng-repeat="deck in model.decks">
              <uib-accordion close-others="false">
                <uib-accordion-group heading="{{ card.count || 1 }} {{ card.name || 'unnamed card' }}"
                    ng-repeat="card in deck.cards">
                  <label>
                    <translate>Name (optional)</translate>
                    <input type="text"
                           class="form-control"
                           ng-model="card.name"
                           placeholder="Name" />
                  </label>
                  <label>
                    <translate>Front URL</translate>
                    <input type="text"
                           class="form-control"
                           ng-model="card.imageUrl"
                           placeholder="Front URL" />
                  </label>
                  <label>
                    <translate>Back URL (optional)</translate>
                    <input type="text"
                           class="form-control"
                           ng-model="card.cardBack"
                           placeholder="Back URL" />
                  </label>
                  <label>
                    <translate>Count (how many copies, optional)</translate>
                    <input type="number"
                           class="form-control"
                           ng-model="card.count"
                           placeholder="Count" />
                  </label>
                  <div class="row">
                    <button class="btn btn-danger col-sm-6 col-sm-offset-3"
                         title="{{ 'Remove this card.' | translate }}"
                         ng-click="deck.cards.splice($index, 1);">
                      <i class="fa fa-fw fa-trash">
                      </i>
                    </button>
                  </div>
                </uib-accordion-group>
                <div class="row">
                  <button class="btn btn-success col-sm-5 col-sm-offset-1"
                          ng-click="deck.cards.push({});">
                    <translate>Add a card</translate>
                  </button>
                  <button class="btn btn-danger col-sm-5"
                       title="{{ 'Remove this deck.' | translate }}"
                       ng-click="model.decks.splice($index, 1);">
                    <i class="fa fa-fw fa-trash">
                    </i>
                  </button>
                </div>
                <label>
                  <translate>Deck name</translate>
                  <input type="text"
                         class="form-control"
                         ng-model="deck.name"
                         placeholder="Name" />
                </label>
                <label>
                  <translate>All cards count</translate>
                  <input type="number"
                         class="form-control"
                         ng-model="deck.commoncardCount"
                         placeholder="Number of cards" />
                </label>
                <label>
                  <translate>All cards back</translate>
                  <input type="text"
                         class="form-control"
                         ng-model="deck.commonCardback"
                         placeholder="Number of cards" />
                </label>
                <div class="row">
                  <button class="btn btn-primary col-sm-10"
                          title="{{ 'Apply count and back to all cards.' | translate }}"
                          ng-click="setAllCards(deck)">
                    <translate>Apply</translate>
                  </button>
                </div>
              </uib-accordion>
            </uib-accordion-group>
          </uib-accordion>
        </uib-accordion-group>
        <uib-accordion-group heading="Page format">
          <label>
            <translate>Paper size</translate>
            <select class="form-control" ng-model="model.pageFormat">
              <option>A4</option>
              <option>Letter</option>
            </select>
          </label>
          <label>
            <translate>Card back</translate>
            <select class="form-control" ng-model="model.backFormat">
              <option value="null" translate>No back</option>
              <option value="standard" translate>One page with front side, the next one with back side.</option>
              <option value="sidebyside" translate>Front and back on the same page, side by side.</option>
            </select>
          </label>
          <label>
            <translate>Rows</translate>
            <input type="number" ng-model="model.rows" />
          </label>
          <label>
            <translate>Columns</translate>
            <input type="number" ng-model="model.cols" />
          </label>
        </uib-accordion-group>
        <uib-accordion-group heading="Card format">
          <label>
            <translate>Card width (inches)</translate>
            <input type="number" step="0.1" ng-model="model.cardWidth" />
          </label>
          <label>
            <translate>Card height (inches)</translate>
            <input type="number" step="0.1" ng-model="model.cardHeight" />
          </label>
          <label>
            <translate>Horizontal margin (inches)</translate>
            <input type="number" step="0.01" ng-model="model.hMargin" />
          </label>
          <label>
            <translate>Vertical margin (inches)</translate>
            <input type="number" step="0.01" ng-model="model.vMargin" />
          </label>
          <label>
            <translate>Background color (Front)</translate>
            <input type="text" ng-model="model.backgroundColor.front" />
          </label>
          <label>
            <translate>Background color (Back)</translate>
            <input type="text" ng-model="model.backgroundColor.back" />
          </label>
        </uib-accordion-group>
        <uib-accordion-group heading="Crop & Shift">
          <label>
            <translate>Image width (inches)</translate>
            <input type="number" step="0.1" ng-model="model.imageWidth" />
          </label>
          <label>
            <translate>Image height (inches)</translate>
            <input type="number" step="0.1" ng-model="model.imageHeight" />
          </label>
          <label>
            <translate>Image horizontal shift (inches)</translate>
            <input type="number" step="0.1" ng-model="model.imageHShift" />
          </label>
          <label>
            <translate>Image vertical shift (inches)</translate>
            <input type="number" step="0.1" ng-model="model.imageVShift" />
          </label>
        </uib-accordion-group>
        <uib-accordion-group heading="Cropmarks">
          <label>
            <translate>Show on front page</translate>
            <input type="checkbox" ng-model="model.cropmarks.showOnFront" />
          </label>
          <label>
            <translate>Show on back page</translate>
            <input type="checkbox" ng-model="model.cropmarks.showOnBack" />
          </label>
          <label>
            <translate>Thickness (inches)</translate>
            <input type="number" step="0.01" ng-model="model.cropmarks.thickness" />
          </label>
          <label>
            <translate>Margin with cards (inches)</translate>
            <input type="number" step="0.01" ng-model="model.cropmarks.margin" />
          </label>
        </uib-accordion-group>
        <uib-accordion-group heading="More...">
          <label>
            <translate>Show boundaries</translate>
            <input type="checkbox" ng-model="model.showBoundaries" />
          </label>
          <label>
            <translate>Show image URL</translate>
            <input type="checkbox" ng-model="model.showImageurl" />
          </label>
          <label>
            <translate>JSON Url</translate>
            <input type="text"
                   class="form-control"
                   ng-model="othermodel.distantJson" />
          </label>
        </uib-accordion-group>

      </uib-accordion>
      <hr />
      <button type="submit"
              class="btn btn-primary"
              ng-click="print()">
        <span class="glyphicon glyphicon-print"></span>
        <translate>Print</translate>
      </button>
      <p translate>Don't forget to turn margins off when printing and to
      choose the same paper size you've chosen here.</p>
      <hr />
    </form>
  </div>
  <ng-include src="'deliver/partials/preview.tpl.html'" />
</div>